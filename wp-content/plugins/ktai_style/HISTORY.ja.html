<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<title>Ktai Style 改版履歴</title>
<style type="text/css">
h1 {text-align:center;}
h2 {color:white; background: maroon;}
dt {font-weight:bold;}
dd {margin:0.5em;}
li {line-height:1.5em;}
.navi {text-align:center;}
</style>
</head>
<body>
<h1>Ktai Style マニュアル</h1>
<p class="navi">[ <a href="README.ja.html">はじめに</a> | <a href="HISTORY.ja.html">改版履歴</a> | <a href="CUSTOMIZE.ja.html">サイト設定とテンプレートの改造</a> | <a href="ADMIN.ja.html">ウェブログ管理機能</a> | <a href="Q_and_A.ja.html">よくある質問と答え</a> ]</p>

<p>※アップグレード時は「<a href="README.ja.html#upgrade">以前のバージョンからの更新方法</a>」も必読です。</p>

<h2>改版履歴</h2>

<dl>
<dt id="ver144">ver 1.44 (2008-09-20)</dt>
<dd><ul>
  <li>EMOBILE H11HW, SONY mylo で閲覧したとき携帯向け表示をさせるようにしました (H11HW については、実機テストをしていません)。</li>
  <li>最新コメント一覧 (テンプレート menu_comments.php を使用した出力) を、端末のキャッシュに残さないようにしました (au 端末はキャッシュに残ってしまい、ページ更新しない限り最新情報ではありませんでした)。</li>
  <li>携帯対応ブログとして teacup.ブログ Auto Page (http://autopage.teacup.com/) を追加しました。</li>
  <li>外部サイトへのリンクをクリックしたとき、携帯サイトが存在するかの確認 (Mobile Link Discovery の検出) でタイムアウトしたり白紙画面になったりすることがある事象を改善しました。また、外部サイトの URI にポート番号を含む場合 (http://blog.example.jp:10080/ のような場合) に携帯サイトの検出ができるよう改善しました。</li>
  <li>a 要素で class="pconly" というクラス指定をした場合、または、shrinkage.php の <code>$none_mobile_url</code> および none_mobile_url フィルターで追加したサイトに対しては、Mobile Link Discovery の検出をせずにすぐ中継ページを出すようにしました。</li>
  <li>スマートフォン等 (「その他」端末) において、「PC 表示にする」リンクをクリックして PC 表示に切り替えた場合、テーマによっては「携帯表示にする」の背景色であるグレーが背景全体に広がってしまうことがある現象を回避するようにしました。</li>
  <li>WordPress MU において、画像が表示されない／リンクにならない／wp-signup.php を実行したときに PHP エラーが発生するなどの不具合を改善しました。(注意: WordPress MU での動作を保証したわけではありません)</li>
  <li>au の絵文字と他機種絵文字の対応を一部変更しました。</li>
  <li>au およびイー・モバイルの新機種について、<code>ks_term_name()</code> による機種名抽出に対応しました。</li>
  <li>iモード用に追加される予定の IP アドレス帯域に対応しました。</li>
  <li>テンプレートタグ <code>ks_is_menu()</code> にオプションの引数を追加しました。</li>
  <li>次の独自フィルターフックを追加しました: ks_login_logo, switch_ktai_view_css, switch_ktai_view</li>
</ul></dd>
<dt id="ver143">ver 1.43 (2008-07-21)</dt>
<dd><ul>
  <li>span 要素, div 要素の stye 属性 (ビジュアルエディタで付けた文字色などが使用) は携帯出力で削除せずそのまま出力するようにしました。</li>
  <li>WordPress 2.6 以降で、wp-content/ ディレクトリーもしくは wp-content/plugins/ ディレクトリーを移設した場合に対応しました。ktai_style/wp-load.php の書き換えが必要です。</li>
  <li>Default テーマなど、本文を途中で切る処理 (テンプレートタグ <code>ks_get_content()</code> で可能) が XHTML 文法違反になることがある事例を修正しました。</li>
  <li>複数プラグインをまとめて使用・停止したとき、携帯ログイン用セッション保存テーブルの生成や削除に失敗する不具合を修正しました。また、WordPress 2.1 以前では管理機能が使えないため、セッション保存テーブルを作成しないようにしました。</li>
  <li>ktai_style フォルダー／ディレクトリーの名前を変更している場合、プラグインを使用停止したとき携帯ログイン用セッション保存テーブルが削除されない不具合を修正しました。</li>
  <li><code>is_ktai()</code> 関数の引数に 'flat_rate' を与える定額パケット通信に対応しているかどうかを返す機能が正常に働いていなかった不具合を修正しました。</li>
</ul></dd>
<dt id="ver142">ver 1.42 (2008-07-10)</dt>
<dd><ul>
  <li>a 要素に href 属性がない場合はリンクとみなさないようにしました (従来は &lt;a name="foo"&gt;&lt;/a&gt; のような場合も外部リンクとして中継ページを出してしまっていました)。</li>
  <li>リンク先に Mobile Link Discovery があるかの確認で、モバイル版ページの URL を確実にできるよう改善しました。(Ktai Style 1.41 でも抽出できない場合があったので、さらに改良)</li>
  <li><code>is_ktai()</code> 関数の引数に 'flat_rate' を与えると、定額パケット通信に対応しているかどうかを返すようにしました (<code>ks_is_flat_rate()</code> と同じ返り値)。</li>
  <li>wp-content/ktai-themes/ ディレクトリーに格納したテーマを設定できない不具合を修正しました。(Ktai Style 1.41 で発生したバグ)</li>
  <li>画像のファイル名が thumbnail.jpg や 160x120.png のような形式 *ではない* 場合 (image.jpg, sample.gif など)、携帯電話向けサムネール (最大96ピクセル) を作らずそのまま表示していた不具合を改善しました (Ktai Style 1.41 で発生したバグ)。</li> 
  <li>コメント時にログインしたとき、コメント投稿後、「cannot redeclare class...」のエラー (クラスの重複定義エラー) が出ることがある不具合を修正しました。</li>
</ul></dd>
<dt id="ver141">ver 1.41 (2008-07-06)</dt>
<dd><ul>
  <li>PHP 5.0, 5.1 でも動くように調整しました。ただし、PHP 5.0.x, 5.1.x でのテストは行なっていません。動かない場合はあきらめてください;-)</li>
  <li>WordPress 2.6 ベータ版への対応を盛り込みました。</li>
  <li>Compact テーマのフッターで、固定ページへのリンクメニューをやめて、固定ページ一覧ページへのリンクとしました (Redportal メニューと同じ表示)。</li>
  <li>各社スマートフォンなど「その他」端末での絵文字画像に style="border:0 none;" 属性を付与しました。絵文字が a 要素に含まれるとき、絵文字画像に枠がつかないようになります。</li>
  <li>PC やスマートフォンにおいて、より多くの絵文字が画像表示できるよう、絵文字と画像の対応を調整しました (画像自体は増えていません)。</li>
  <li>中継ページを出さずに直接リンクするウェブサイトに「楽天アフィリエイト」を追加しました。</li>
  <li>新規投稿および投稿編集で投稿スラッグが入力・編集できるようになりました。</li>
  <li>WordPress 2.3 以降では、ダッシュボードに下書きの件数を表示し、また、投稿管理画面で公開ステータス (投稿ステータス) での絞り込みができるようになりました。WordPress 2.2 では、投稿一覧の上部に、自分の草稿に加えて他人の草稿も表示するようにしました。</li>
  <li>ktai_style/admin/ 配下の管理機能に直接アクセスしてログイン画面にリダイレクトされたとき、ログイン後にアクセスしようとした管理画面にジャンプするようにしました。(PC の管理機能と同じ動作)</li>
  <li>下書き投稿は作成日時を 0000-00-00 00:00:00 となるようにしました。(PC での下書き作成と同じ動作)</li>
  <li>au の機種判別で、7月に発売する新機種に対応しました。</li>
  <li>携帯向けサムネールを作らないぐらい小さい画像 (長辺が 96 ピクセル以下) が表示されない不具合を修正しました (Ktai Style 1.35 以後発生していたバグ)。</li>
  <li>PNG, GIF 画像をインライン表示ではなくリンクに変換している場合 (mova, ソフトバンク PDC 等) において、PC 向けサムネールまたは中サイズ画像へのリンクが見つからない (Not Found) になっていた不具合を修正しました。</li>
  <li>Palm OS ハンドヘルド、シャープ Zaurus で閲覧したとき、WP-Cache 等キャッシュプラグインに携帯表示がキャッシュされてしまう不具合を修正しました。</li>
  <li>リンク先に Mobile Link Discovery があるかの確認で、相手先サーバーがチェンク形式のデーター (Transfer-Encoding: chunked) を返したときに、モバイル版ページの URL をうまく抽出できないことがあった不具合を修正しました。</li>
  <li>leave_scheme, mobile_same_url, none_mobile_url フィルターフックを使うためのフィルター関数を、携帯テーマの functions.php に書いても呼び出されるようにしました。(従来は、フィルター関数を my-hacks.php に書く必要がありました)</li>
  <li>作者権限ではコメントを編集できないことがある不具合を修正しました。</li>
  <li>プロフィール編集で日本語ニックネームを入力しても空白になってしまう不具合を修正しました。また、WordPress 2.5 以降で、メッセージが英語の「Profile Updated.」になっていたのを日本語メッセージになるように調整しました。</li>
  <li>Ktai_Style::request_path() メソッドを廃止しました。代わりに <code>$_SERVER['REQEUST_URI']</code> を使用してください。</li>
  <li>独自テンプレートタグ <code>ks_get_wp_version()</code> を廃止して <code>ks_check_wp_version()</code> を新設しました。</li>
</ul></dd>
<dt id="ver140">ver 1.40 (2008-06-18)</dt>
<dd><ul>
  <li>Palm OS ハンドヘルド、シャープ Zaurus も携帯表示をさせるようにしました。</li>
  <li>スマートフォン等の「その他」端末では、プラグイン画像をそのまま表示させるようにしました。例えば、FireStats の国旗・OS・ブラウザーアイコンが、プラグイン組み込みのものがそのまま出ます。</li>
  <li>ウィルコム、イー・モバイル、スマートフォン等の「その他」端末では、外部サイトへのリンクにアイコンをつけるのをやめました。もともと直接リンクしており、アイコンをつける意味はありませんでした。</li>
  <li>PC やスマートフォンでも絵文字が画像で表示されるようにしました。今のところ、iモード絵文字のみすべて画像で出ます。それ以外の絵文字は順次対応する予定です。</li>
  <li>外部サイトへの中継ページを出す直前で相手先にアクセスして <a href="http://www.sixapart.jp/docs/tech/mobile_link_discovery_ja.html">Mobile Link Discovery</a> を確認し、携帯ページを発見すれば直接リンクするようになりました。このため「PC向け」の表示を「外部サイト」に変更しました。</li>
  <li>RSS2 フィードにも Mobile Link Discovery を出力するようにしました。</li>
  <li>「携帯表示」設定画面のテーマ一覧で、style.css に記載されたテーマ名称およびバージョンを表示させるようにしました。従来はテーマのフォルダー (ディレクトリー) 名を出していました。</li>
  <li>コメントへの絵文字使用を認めない場合、ソフトバンク絵文字がウェブコードのまま残っていましたが、積極的に除去するようにしました。</li>
  <li>投稿管理およびコメント管理で、ページナビゲーションをリストの下に移動しました。</li>
  <li><code>in_network()</code> メソッドをウィルコムの IP アドレス帯域追加に対応させました。</li>
  <li>言語リソースを lang フォルダーに、電話キャリアー用ライブラリーを operators ディレクトリーに移動しました。</li>
  <li>附属テーマの PHP, XHTML の記述を見やすいよう改善しました。テーマの見栄えは従来と同じです。</li>
  <li>Windows サーバーで運営していて、かつ、プラグインのフォルダー名を ktai_style 以外に変更しているとき、正常に動作しない不具合を修正しました。</li>
  <li>GD が組み込まれていない PHP で稼動させたときでも異常終了しないようにしました。</li>
  <li><code>comment_form</code> アクションを利用してコメント投稿フォームにフィールドを追加するプラグインが正常に動作しない不具合を修正しました。</li>
</ul></dd>
<dt id="ver136">ver 1.36 (2008-06-09)</dt>
<dd><ul>
  <li>Ktai Style 1.35 で、携帯からコメントすると白紙画面もしくは PHP エラー画面になってしまう不具合を修正しました (Ktai Style 1.35 のみ存在するバグ)。</li>
  <li>Ktai Style 1.35 で、画像をインライン表示させているとき、<code>imagecreatefromjpeg()</code> 関数などが存在しないサーバーでは、投稿がうまく表示されないことがある不具合を修正しました (Ktai Style 1.35 のみ存在する不具合)。</li>
  <li>WordPress 2.3 以降でパーマリンク設定をしている場合、クエリー文字列つき URL でアクセスしたとき、本来の URL (パーマリンクを使った URL) へのリダイレクトが不正になる不具合を修正しました。例えば、PC では、http://example.jp/?cat=3 にアクセスすると http://example.jp/category/living/ にリダイレクトされる場合、携帯では http://example.jp/://example.jp/category/living/ という不正な URL にジャンプしていました。</li>
  <li>作成者権限しかないユーザーがコメント編集した場合、絵文字要素 (&lt;img localsrc="NNN" /&gt; フォーマットの XHTML タグ) が消えてしまう不具合を修正しました。</li>
</ul></dd>
<dt id="ver135">ver 1.35 (2008-06-06)</dt>
<dd><ul>
  <li><a href="http://mnm.uib.es/gallir/wp-cache-2/">WP-Cache 2.0</a> および <a href="http://ocaoimh.ie/wp-super-cache/">WP Super Cache</a> と併用しても問題なく動作するように、アドオンファイル patch-wpcache.php を添付しました。</li>
  <li>au の機種判別で、6月に発売する新機種に対応しました。</li>
  <li>img 要素に alt 属性がないときに画像が表示されない不具合を修正しました。(Ktai Style 1.33, 1.34 で発生したバグ)</li>
  <li>BMP 画像など、GIF, PNG, JPEG 以外の画像を表示させようとしたとき、PHP エラーが出てしまう問題を修正しました。</li>
  <li>コメント投稿時エラーをインライン表示させているとき (附属テーマの classic, default, redportal の場合など)、エラー発生時に、入力内容にあるシングルクォート(')やダブルクォート(")の前にバックスラッシュ(\)がついてしまう不具合を修正しました。</li>
  <li>作成者権限しかないユーザーが、PC で絵文字を含む投稿を編集すると、img 要素が壊れてしまう不具合を修正しました。</li>
  <li>新規投稿・投稿編集で、カテゴリー選択画面に遷移して元の画面に戻ったとき、タグフィールドの内容が保存されない不具合を修正しました。</li>
  <li>EUC-JP なウェブログで default, classic テーマを使った場合に文字化けする可能性があったのを改善しました (それぞれ index.php を修正)。</li>
</ul></dd>
<dt id="ver134">ver 1.34 (2008-05-07)</dt>
<dd><ul>
  <li>WordPress 2.3.3 以前において「絵文字投稿を許可する」設定にした場合、投稿本文にシングルクォート (') を含む場合に、投稿編集に失敗する不具合を修正しました。<strong>*** これは Ktai Style 1.20 〜 1.33 に存在するセキュリティー欠陥です ***</stong> </strong></li>
  <li>WordPress 2.5 以降において、「絵文字投稿を許可する」設定でコメント編集をするとシングルクォート (') の前にバックスラッシュ (\) がついてしまう不具合を修正しました。</li>
  <li>ウィルコム絵文字で 0xF052 は「バイク」が正当なため、変換テーブル等を修正しました (従来は「船」だと思っていました)。</li>
  <li>Nokia 端末の判別で取りこぼしがあったのを修正しました (ソフトバンク X02NK など対応)。</li>
  <li>投稿一覧で、ワード検索が正常に動作していなかった不具合を修正しました (Ktai Style 1.30 でエンバグ)。</li>
  <li>テンプレートタグ <code>ks_mb_get_form()</code> において、絵文字投稿の設定によってエスケープを外す／外さないの違いがあった問題を修正しました (エスケープありのままとしました)。</li>
</ul></dd>
<dt id="ver133">ver 1.33 (2008-04-28)</dt>
<dd><ul>
  <li>WordPress 2.5 以降のメディア管理で挿入した画像の場合、alt 属性が空でも画像を表示させるようにしました (class 属性に wp-image-NNN が含まれるかどうかで判断)。</li>
  <li><a href="http://wp.uberdose.com/2007/03/24/all-in-one-seo-pack/">All in One SEO Pack</a> を使っていると、携帯閲覧時、「白紙ページ」になったり title 要素が文字化けしたりする現象を回避するようにしました。</li>
  <li><a href="http://wppluginsj.sourceforge.jp/ktai_entry/">Ktai Entry</a> によるメール投稿の新着確認をできるようにしました。</li>
  <li>WordPress 2.5.1 で、携帯電話からの新規投稿・投稿編集で画面が途中で切れたり画面が白紙になる現象を修正しました。</li>
  <li>附属テーマの classic, default, redportal は、PlayStation Portable (PSP) で閲覧したときに画面が真っ黒になる不具合があったのを修正しました (バージョン 0.98 で複数テーマが切り替え可能になったときより発生していいました)。</li>
</ul></dd>
<dt id="ver132">ver 1.32 (2008-04-17)</dt>
<dd><ul>
  <li><a href="http://firestats.cc/">FireStats</a> がコメント投稿者の国旗アイコンを追加した場合、可能ならば携帯絵文字の国旗に変換するようにしました (日本、アメリカ、スペイン、ロシア、フランス、ドイツ、イタリア、イギリス、中国、韓国)。</li>
  <li>プラグイン用画像をリンクにせず alt 文字列をそのまま表示する処理は、コメント一覧にも適用するようにしました。</li>
  <li>Ktai Style 1.31 で作り込んでしまった、携帯向けページ分割が正常動作していない不具合を解消しました。</li>
</ul></dd>
<dt id="ver131">ver 1.31 (2008-04-15)</dt>
<dd><ul>
  <li>コメント一覧画面で、コメント投稿者の名前からサイト URL にリンク、もしくはトラックバック・ピンバック元サイト名からサイト URL にリンクするようにしました (従来はリンクせず名前だけ表示していました)。</li>
  <li>コメント編集画面で、端末識別番号を要求したときに取得した端末番号・USIM 番号や契約者IDが見られるようにしました (PC 向け管理パネルでは WordPress 2.5 以降に対応、携帯管理画面では WordPress 2.2 以降対応)。</li>
  <li>モードID通知をオフにしている端末に対しては、端末製造番号を要求するようにしました。</li>
  <li>権限が作者 (Author) 以下のユーザーで携帯絵文字を使って投稿しても絵文字が出ない問題、および下書きを編集すると「レビュー待ち」になってしまう問題を修正しました。</li>
  <li>本文の末尾に &lt;br&gt; のような、開き要素に見える HTML 要素がある場合、空の分割ページができてしまう問題を修正しました。</li>
  <li>img 要素の alt 要素などで、特定の文字 (「キ」や「業」など) が破壊されてしまう不具合への対応として、<a href="http://trac.wordpress.org/attachment/ticket/5917/kses_bad_protocol.diff">WordPress本家の trac #5917 に対するパッチ</a>を適用したものに変更しました (従来は単純に 0xad を除去する処理を削除しただけだった)。</li>
  <li>ウェブログの文字コードが UTF-8 以外の場合、PC から携帯絵文字を含む投稿・コメントを見たときに文字化けする不具合を修正しました。</li>
  <li>SoftBank 6-3 シリーズにおいて、見出し要素 (h1 - h6) を div 要素と p 要素の組に変換させるようにしました。(div 要素だけだと前の要素との間に空行がなく、p 要素だけでは align 要素が無効なため)</li>
  <li>「携帯表示」設定画面に「TU-KA」の記述があったのを削除しました (サービス終了したため)。</li>
  <li>次のテンプレートタグを追加しました: <code>ks_comment_author_link()</code></li>
</ul></dd>
<dt id="ver130">ver 1.30 (2008-04-08)</dt>
<dd><ul>
  <li>WordPress 2.5 正式版およびイー・モバイル音声端末での動作を確認しました。WordPress 2.5 正式版では以下の改善を行なっています。<ul>
    <li>携帯管理画面の「投稿管理」で投稿一覧が出ないことがある問題を修正しました。</li>
    <li>従来は、WordPress 2.5 のサムネームを元画像と誤認して、そこから小型サムネールを作っていたのを、元画像を正しく探索してサムネールを作れるようにしました。</li>
    <li>gallery ショートコードを使った場合、本文に埋め込まれたスタイルシートを削除するようにしました (ドコモ端末ではスタイルシートの記述が見えてしまうため)。</li>
</ul></li>
  <li>WordPress 2.0.x, 2.1.x にも対応しました。ただし閲覧機能のみ対応で、管理機能は使えません。</li>
  <li>PC 版ページの URL に携帯電話でアクセスするとモバイル版ページが出るブログサービスへのリンクは、中継ページを出さずに直接ジャンプするようにしました。</li>
  <li>外部サイトのリンクで、a 要素に class="ktai" を追加した場合、中継ページを出さずに直接ジャンプするようにしました。リンク先 URL が同一 URL で PC／携帯両対応しているサイトの場合に指定すると便利です。</li>
  <li>他のプラグインが本文に挿入したスタイルシートや JavaScript を削除するようにしました。</li>
  <li>コメント時に端末識別情報を必須にしている場合、mova, FOMA では iモード ID を取得するようにしました (従来は端末 ID, UIM ID を取得していた)。このため、「携帯電話情報を送信しますか」のダイアログが出なくなりました。</li>
  <li>コメント投稿時に端末識別情報を必須とする対象に、イー・モバイル音声端末 (EMnet 経由接続の場合) を加えました。</li>
  <li>compact, default テーマで、コメント表示時の「コメント投稿」のリンクを、コメントの先頭ではなくコメント末尾の下に移動しました。</li>
  <li>管理画面の「投稿管理」で、年月を指定して絞り込みできるようにしました。</li>
  <li>自作の携帯テーマファイルは wp-content/ktai-themes/ ディレクトリー配下に入れられるようにしました。ktai_style ディレクトリーの外側のため、プラグインのアップグレードが容易になります。従来通り、wp-content/plugins/ktai_style/themes/ ディレクトリーに入れても構いませんが、今後は ktai-themes ディレクトリーが推奨です。</li>
  <li>自作テーマで、独自の menu_XXX.php ファイルを作った場合、?menu=XXX で呼び出せるようにしました。PC 向けテーマではサイドバーに入れているものを、携帯版では独立したページに切り出して提供するなどの構成が可能です。</li>
  <li><code>ks_pages_menu()</code> の第4引数で、リストアップするページの表示条件を指定できるようにしました。また、デフォルトで親ページ (第1階層のページ) のみリストアップするようにしました。</li>
  <li>携帯キャリアのIPアドレス帯域からアクセスしているかの判別をできるようにしました (<code>ks_in_network()</code>テンプレートタグ)。</li>
  <li>iモードIDを取得できるようにしました (<code>$Ktai_Style->get('sub_ID')</code>)。そのかわり、FOMA の term_ID を、端末 ID と UIM ID をコンマ (,) でくっつけた形に変更しました (従来は UIM ID を sub_ID に入れていました)。</li>
  <li>S11HT, F1100 でアクセス時、<code>ks_term_name()</code> で機種名がうまく得られない問題を修正しました。</li>
  <li>TU-KA のサービス終了に伴ない、TU-KA のデバイス ID／機種名対応テーブルを削除しました。</li>
  <li>画像をインライン表示させるとき、パーミッションがない等で小型サムネールが作れないときでも、PHP のエラーを表示させずに処理するようにしました。</li>
  <li>投稿スラッグを変更したとき、古い投稿スラッグによる URL へのアクセスを新しいパーマリンクにリダイレクトする WordPress の機能が、携帯電話では効かなかった (投稿が見つかりませんになる) 問題を修正しました。</li>
  <li>次の独自フックを追加しました: <code>init_pc, init_mobile, ks_die_logo, mobile_same_url, no_mobile_url, split_page_navi, switch_pc_view, switch_inline_images</code></li>
  <li>次のテンプレートタグを追加しました: <code>ks_in_network(), ks_do_comment_form_action(), ks_wp_head(), ks_wp_footer()</code></li>
</ul></dd>
<dt id="ver121">ver 1.21 (2008-03-18)</dt>
<dd><ul>
  <li>携帯絵文字の入力で、ソフトバンク 3G 端末からの入力にも対応しました。ver 1.20 は対応しておらず、?? のように文字化けしてしまっていました。</li>
  <li>外部サイトの画像を img 要素で呼び出している場合にも「画像を表示／リンクに変換」のメニューが出てしまっていたのを、出ないように抑制しました。(外部サイトの画像は必ずリンクになるため、切り替えメニューは意味がないのに、出てしまっていました)</li>
  <li>イー・モバイル音声端末において、HTTP ヘッダの x-em-uid フィールドから契約者 ID (ユーザー ID) の取得を試みるようにしました。</li>
</ul></dd>
<dt id="ver120">ver 1.20 (2008-03-14)</dt>
<dd><ul>
  <li>WordPress 2.5 への対応を盛り込みました (正式版での確認はまだです)。<ul>
  <li>Ktai Style バージョン 1.11 以前では、管理機能で不具合が出ますが、それを解消しています。</li>
  <li>「携帯表示」設定ページを WordPress 2.5 の管理パネルデザインに合うようにしました (2.3 以前では、ほぼ表示は同じです)。</li>
  <li>WordPress 2.5 では携帯ログイン画面のデザインを PC 版に似せて淡い色にしました (2.3 以前では、従来通りのデザインです)。</li> 
  <li>携帯版ダッシュボードで、投稿数、カテゴリー数などの表示を上に移動しました (WordPress のバージョンによらず)。</li>
</ul></li>
  <li>イー・モバイルのネット接続サービス EMnet への対応を盛り込みました (実機での確認はまだです)。現時点では H11T のモバイルブラウザモードおよび、S11HT の IEMobile での閲覧で、携帯電話向け表示になります。</li>
  <li>携帯電話からのコメント投稿・新規投稿・投稿編集などで絵文字が入力できるようになりました。デフォルトでは無効ですので、管理パネルの「携帯表示」にて、絵文字の入力を「許す」に設定する必要があります。絵文字はデータベースでは <code>&lt;img localsrc="XXXX" /&gt;</code> という形で格納され、PC やスマートフォン等での閲覧時は代替テキストに展開、携帯電話での閲覧時は電話会社に応じた絵文字に適切に変換されます。</li>
  <li>スマイリーから携帯絵文字の変換で、対応テーブルを修正して、より適切なものに変更しました。(ソフトバンク絵文字への変換は不適切なものが多かった)</li>
  <li>テンプレートタグ <code>ks_mb_get_form()</code> が、携帯絵文字を検出して、<code>&lt;img localsrc="XXXX" /&gt;</code> というフォーマットに変換できるようにしました。</li>
  <li>各社 3G 端末、WILLCOM、スマートフォン等で出る「画像を表示する／リンクに変換」のメニューを、表示中ページに画像がない場合は隠すようにしました。</li>
  <li>WordPress コアが、アポストロフィー、ダッシュ、3点リーダーなどを数値実体参照に変換しても、普通の文字に戻すようにしました (数値実体参照は携帯電話で文字化けする場合が多いため)。</li>
  <li>携帯電話からの新規投稿／投稿編集で、コメント・ピンバックの許可・拒否を設定できるようにしました。「投稿を削除」はボタンではなくリンクにしました (WordPress 2.5 風)。</li>
  <li>携帯電話でのコメント編集で、メールアドレス欄を追加しました (なぜか今までありませんでした)。「コメントを削除」はボタンではなくリンクにしました (WordPress 2.5 風)。</li>
  <li>携帯電話用の管理パネルで、コメントの「一括編集モード」を廃止しました。</li>
  <li>携帯電話用のページ分割で、ol 要素の途中で分割された場合、ol 要素の start 属性を用いて、項目番号を前ページから継続させるようにしました。前ページが8番目の途中で分割された場合、現在ページは 8 という項目数字から始まります。従来は、2ページ目以降の項目番号が1番にリセットされてしまっていました。また、ソフトバンク絵文字の途中で分割された場合、分割点以後の表示が乱れてしまう問題を修正しました。</li>
  <li>外部リンクへの中継ページで、クエリ文字列 (? や &amp; など) を含む URL が途中で切れてしまう問題を修正しました。また、i-mode, EZweb の場合、URL のコピーをしやすいようにテキストフィールドを付けました (ソフトバンクはテキスト中の URL を直接コピーしてください)。</li>
  <li>附属テーマにおいて、絵文字の代替文字列が抜けていた (<code>&lt;img localsrc="XXXX" /&gt;</code> となっていた) 部分に <code>alt=""</code> を追加しました。代替文字列がない場合、services.php で定義した代替文字を出すようになったための対応です。もし、自作テーマで <code>&lt;img localsrc...</code>を使っている場合は修正が必要です。</li>
  <li>標準のパーマリンクを使用している場合、SoftBank PDC 等の古い端末において、コメント閲覧・コメント投稿などのリンクがうまく動かなかった問題を改善しました。</li>
  <li>W-ZERO3 シリーズ、EM・ONE、htc Z 等の Windows Mobile スマートフォンにおいて、<code>ks_term_name()</code> が適切な機種名ではなく「Windows CE;」という文字列を返していた問題を修正しました。(バージョン 1.10, 1.11 のみのバグ)</li>
  <li>全テーマの page.php で余分な div 要素が出ないよう調整しました (実際には、Ktai Style コアが余剰な div 要素を削除しているので、表示上は変化ありません)。</li>
  <li>default テーマで index.php が表示する投稿本文は先頭1000バイトのみに短縮しました。投稿本文が長い場合でもページ分割が起きなくなります。</li>
  <li>compact, default テーマ、携帯管理画面で、カテゴリーを表すアイコンを「王冠」にしました。従来の「電球」はタグを示すアイコンと同じだったため、変更しました。</li>
  <li>redportal テーマで、コメント停止中の投稿において、コメント一覧ページの hr 要素がダブってしまう問題を修正しました。</li>
  <li>標準テンプレートタグ <code>the_excerpt(), get_the_excerpt()</code> において、投稿本文から抜粋に変換する処理を、マルチバイト文字を考慮した処理に差し替えるようにしました。(WordPress 本家版／日本語版ではうまく抜粋が作られないため)</li>
  <li>テンプレートタグ <code>ks_ordered_list(), ks_comments_link(), ks_comments_post_link(), ks_back_to_post()</code> は、絵文字 (数字、四角、矢印等) の直後からリンクを張るようにしました (絵文字自体はリンクされません)。</li>
  <li>WordPress 確認ウィンドウ (コメントエラーや外部サイト接続確認などの表示) で XHTML 文法違反になることがあった問題を修正しました。</li>
  <li>次の独自フィルターフックフィルターフックを追加しました: <code>detect_agent, redir, smiley_table, pictogram_table, convert_pict_other</code></li>
  <li>次のテンプレートタグを追加しました: <code>ks_get_content(), ks_service_type(), ks_is_flat_rate(), ks_is_menu(), ks_is_image_inline(), ks_added_inline_image(), ks_has_inline_images(), ks_applied_appl_xhtml()</code></li>
</ul></dd>
<dt id="ver111">ver 1.11 (2008-02-27)</dt>
<dd><ul>
  <li>admin フォルダーをサーバーに転送しなかった場合 (管理機能を使わない場合) でも、<a href="http://wordpress.org/extend/plugins/mobileadmin/">iPhone / Mobile Admin</a> プラグインが存在する場合は、PC 向け管理画面が使えるようにしました (従来は、管理機能を使わない場合でも PC 向け管理画面へのアクセスを許すプラグインは <a href="http://wphoneplugin.org/">WPhone Admin Plugin</a> だけでした)。</li>
  <li>バージョン 0.99〜1.10 の redportal テーマで「コメントを書く」の前の数字絵文字がダブっていたのを修正しました。</li>
  <li>テンプレートタグ <code>ks_previous_post_link(), ks_next_post_link(), ks_previous_posts_link(), ks_next_posts_link(), ks_posts_nav_link(), ks_posts_nav_multi(), ks_comments_link(), ks_comments_post_link(), ks_back_to_post()</code> で、アクセスキーを指定できるようにしました (従来は、*, #, なし、の決め打ちでした)。また、<code>ks_next_posts_link()</code> は引数 <code>$max_page</code> の位置を変更しました。</li>
  <li><code>ks_ordered_link()</code> を使った場合、数字のアクセスキーが効かない問題を修正しました (バージョン 1.10 のみ存在するバグ)。</li>
</ul></dd>
<dt id="ver110">ver 1.10 (2008-02-25)</dt>
<dd><ul>
  <li>画像の扱いを改善しました。<ol>
  <li>FOMA, EZweb WAP2.0 機, SoftBank 3G, WILLCOM, その他端末では、画像をリンクにせず長辺が96ピクセルのサムネール (容量は 2.5KB 程度) を生成してインライン表示させるようにしました。</li>
  <li>mova, EZweb HDML 端末、SoftBank PDC 端末は従来通り、画像へのリンクとしますが、WordPress が作成したサムネールへのリンクの場合、容量が大きくて端末で表示できないと推測されるときは、Ktai Style が作成した96ピクセルのサムネールへのリンクに差し替えます (リンクがグレーアウトしなくなった)。</li>
  <li>元画像が PNG (または GIF) 画像の場合、同じサイズの GIF (または PNG) 画像および、PNG, GIF 両方の小型サムネール (96ピクセル) を作成するようにしました。これにより、PNG が閲覧できない i-mode 端末、GIF が閲覧できない SoftBank PDC 端末でも画像が見られます。</li>
  <li>画像をサムネール化／リンク化するとき、シンボリックリンク等で、WordPress インストールディレクトリー外のディレクトリーを呼び出している場合でも、できる限り探し出すようにしました。例えば、http://example.jp/blog/ に WordPress をインストールしていて、http://example.jp/photos/ に画像を入れている場合、従来は外部サーバーの画像と同じ扱いでしたが、今バージョンから、サムネールを作成したり、「元画像(xxKB)」のようなリンクになったりします。</li>
  <li>EZweb の画像表示可能サイズとして HTTP ヘッダの HTTP_X_UP_DEVCAP_MAX_PDU を利用するようにしました。この値が読めない場合は従来通り、HDML 端末で 48KB, WAP2.0 端末で 100KB が上限となります。</li>
</ol></li>
  <li>PC 向けページのヘッダに <a href="http://www.sixapart.jp/docs/tech/mobile_link_discovery_ja.html">Mobile Link Discovery</a> を挿入するようにしました。Google モバイル、Livedoor ブログ等、Mobile Link Discovery に対応したサービスの携帯ページから Ktai Style をインストールしたブログにリンクしている場合、Ktai Style による出力が表示されるようになるはずです。</li>
  <li>携帯電話用にページ分割して2ページ目以降を閲覧しているとき、<code>ks_previous_posts_link(), ks_next_posts_link(), ks_posts_nav_link()</code> (ナビゲーションリンク) の出力に、現在の分割ページ番号を含んでしまっていた問題を修正しました (リンク先は常に1ページ目を指すようになった)。</li>
  <li>「その他」端末で「PC 表示にする」をクリックして携帯表示を終了させたときは、テンプレートタグ <code>is_ktai()</code> が FALSE を返すようにしました。</li>
  <li><code>ks_is_front()</code> は、独自テンプレートの menu_XXXX.php (年月アーカイブ／カテゴリー一覧／タグクラウド／ページ一覧／ブログロール／最近のコメント) を表示しているときに FALSE となるようにしました (従来は TRUE になっていました)。</li>
  <li><code>ks_get_recent_comments()</code> に第3引数 <code>$group_by_post</code> を追加しました。最新コメントを純粋に受信日時順にできます (投稿 ID でまとめないことが可能)。</li>
  <li>携帯電話でアクセスしたとき、<a href="http://wordpress.org/extend/plugins/wp-spamfree/">WP-SpamFree</a> プラグインが起動しないようにしました。</li>
  <li>classic, compact, default テーマのフッタで「plug-in」という誤記を修正しました。</li>
  <li>classic テーマで、存在しないカテゴリー・タグ・日付などを表示しようとしたとき、hr 要素がダブってしまう表示を修正しました。</li>
  <li>管理画面で、重要な変更を加えるときなど「WordPress 確認画面」が出たとき、変更結果が文字化けすることがあった問題を修正しました。例えば、投稿やコメントを編集するときに nonce が合致しなかったときなど「WordPress 確認画面」が出ますが、「はい」ボタンを押したときに編集結果が文字化けしてしまっていました。</li>
  <li>ktai_style.php で KS_DELETE_EXTERNAL_LINKS 定数を定義すると、一律に外部リンクを削除できる機能を削除しました。そのかわり、<a href="CUSTOMIZE.ja.html#del_ext">external_links フィルターフックを使って外部リンクを削除する方法</a>を提案しています。</li>
  <li><code>ks_posts_nav_link()</code> テンプレートタグで、前後ページを示す文字列を指定できるようにしました。</li>
  <li>次のテンプレートタグを追加しました: <code>ks_pict_char_number()</code></li>
</ul></dd>
<dt id="ver101">ver 1.01 (2008-02-18)</dt>
<dd><ul>
  <li>携帯テーマに style.css が存在しないときの動作を改善しました。現在のテーマに style.css がないとき、携帯電話テーマを default に差し替えるようにして、PC 版テーマが default に戻る挙動は回避されるようにしました。管理画面では style.css がないテーマは認識しないようにしました。</li>
  <li>ホスト名直下に WordPress をインストールしているとき、WordPress テンプレートタグ <code>get_stylesheet_directory_uri(), get_template_directory_uri()</code> および Ktai Style 独自テンプレートタグ <code>ks_theme_url()</code> の返り値で先頭にスラッシュがダブっていたのを修正しました。端末によってはテーマの画像などが正しく読まれなかったのが直ります。</li>
  <li><code>ks_use_appl_xhtml()</code> の適用対象から WILLCOM を外しました。バージョン 0.99 まで非対象、バージョン 1.00 で対象としましたが、インラインスタイルシートが認識されないため適用中止とします。</li>
  <li>WordPress 2.3.x の場合、携帯管理画面の「コメント編集 (閲覧モード)」「コメント編集 (一括編集モード)」「コメント承認」で "Previous Page", "Next Page" がローカライズされていなかったのを修正しました。</li>
</ul></dd>
<dt id="ver100">ver 1.00 (2008-02-16)</dt>
<dd><ul>
  <li>附属ドキュメントを HTML 書類にしました。また、「よくある質問と答え」(Q_and_A.html) を添付しました。</li>
  <li>ウェブログ URL の配下にある画像すべてに対して、サイズが大きくて閲覧中の端末で表示できないと推測される場合、リンクにせず、alt 文字列やファイルサイズを表示するようにしました (従来は、サムネールにリンクした元画像だけサイズを確認していました)。</li>
  <li>ドコモ、KDDI の場合も、外部サイトへのリンクは中継ページを出すようにしました。FOMA または KDDI の WAP2.0 対応端末の場合は、中継ページにフルブラウザ／PC サイトビューアーでの閲覧リンクも出ます。</li>
  <li>スマートフォン等「その他」端末において、携帯向けログインフォームからも PC 用ログインフォームに移動できるようにしました (従来は、ウェブログ画面のみから PC 向け表示への切り換えができた)。</li>
  <li>携帯テーマにおいて style.css ファイルを必須ファイルとしました。自作携帯テーマを使っているときはアップグレード時に style.css を作ってやる必要があります。さもないと、PC 版テーマが default に戻ってしまいます。</li>
  <li>固定ページで、ページテンプレートの指定を反映するようにしました。PC 向けテーマで使用しているページテンプレートと同じ名前で、携帯テーマのディレクトリーにページテンプレートを作成してください。もしページテンプレートがなければ、page.php を探し、なければ index.php を使用します。</li>
  <li>定数 <code>TEMPLATEPATH, STYLESHEETPATH</code> に携帯テーマへのパスが入るようにしました。このため、<code>get_template(), get_stylesheet()</code> 等のテンプレートタグでも携帯サイトのテーマ名が得られます。また、現在の PC 版テーマにある function.php が実行されなくなります。</li>
  <li>全テーマの header.php で html 要素から xmlns, xml:lang, lang 属性を削除しました。xmlns 属性はテンプレートタグ <code>ks_use_appl_xhtml()</code> を使うと挿入されます。</li>
  <li>compact, default テーマの index.php, single.php で、記事の上にある日付に下線を入れるのをやめました (i-mode は u 要素非対応のため)。</li>
  <li>redportal テーマの footer.php で dt 要素の閉じ忘れがあったのを修正しました。</li>
  <li><code>ks_use_appl_xhtml()</code> を使ったとき、b,i,u,em,strong 要素と font 要素の入れ子は、b,i,u,em,strong 要素に style 属性を付けるような変換としました (従来は font 要素を単純に span style に変換していました)。これにより、SoftBank 3G にて、文法違反が解消されました。</li>
  <li><code>ks_use_appl_xhtml()</code> を使ったとき、hr 要素のスタイルシート変換を改善しました。(color, width の順序を不問にし、align にも対応した)</li>
  <li>SoftBank 端末で絵文字数字[1]や[3]を含むページをページ分割した際、XHTML が不正になる問題を修正しました。</li>
  <li>SoftBank 6-3 シリーズにおいて、見出し要素 (h1 - h6) を div 要素に変換させるようにしました。(従来は p 要素に変換していましたが、align 属性が無効なため変更しました)</li>
  <li>img 要素の alt 要素などで、特定の文字 (「キ」や「業」など) が破壊されてしまう不具合を修正しました。</li>
  <li>1x1 ピクセルの画像 (アフィリエイトやレイアウト調整用) を非表示にする機能が有効になっていなかったバグを修正しました。</li>
  <li>WordPress の一般設定で、「ブログのアドレス」(get_option('home')の値) を設定していないとき、ハイパーリンクが不正になることがある問題を修正しました。</li>
  <li>次の独自フィルターフックを追加しました: <code>external_link</code></li>
  <li><code>strip_links</code> フィルターフックを <code>convert_links</code> に改名しました。</li>
</ul></dd>
<dt id="ver099">ver 0.99 (2008-02-02)</dt>
<dd><ul>
  <li>動作条件を PHP 5.2.0 以降としました。実は以前から PHP 5.1.6 以前で動かなかったのですが、明記されていませんでした。</li>
  <li>README ファイルを README-ja_utf8.txt から README-ja.txt に名称変更しました。</li>
  <li>au の機種判別で新機種の追加と誤記の訂正をしました。</li>
  <li>default, compact, redportal テーマでは、コメント投稿時に必須事項 (コメント本文、名前、携帯電話情報など) が記入されてないとき、コメントフォームを再び表示してその上部にエラーを出すようにしました。すでに入力した内容が残るようになります。</li>
  <li>全テーマの header.php に style 要素を追加して、EZweb の WAP2.0 対応端末でも p 要素同士の間に空行を作るようにしました。i-mode, SoftBank 端末では従来から空行がありましたが、EZweb では詰まって表示されていました。</li>
  <li>フロントページ (ウェブログのトップページ) は、端末のキャッシュに残さないようにしました (au 端末はキャッシュが長く残るため、最新記事を見るには都度ページ更新が必要だった)。</li>
  <li>UTF-8 で記述されたハートマーク等のトランプマーク、および &amp;hearts; 等の実体参照を絵文字に変換するようにしました。</li>
  <li>管理画面の「携帯表示」設定で、オプション値を削除してデフォルトに戻せるようにしました。</li>
  <li>言語リソースが読まれていないとき (wp-config.php で WPLANG が ja_UTF なのに ktai_style-ja.mo をリネームしていないとき)、携帯電話からコメント投稿すると文字化けすることがありましたが、現象が発生しないよう対策しました。</li>
  <li>admin フォルダーをサーバーに転送しなかった場合 (管理機能を使わない場合)、携帯電話から通常のログイン画面・管理画面へのアクセスも遮断するようにしました。</li>
  <li>閲覧日と同じ日付の投稿は時刻だけ表示する仕様のはずでしたが、実際には月日も表示していたバグを修正しました (時刻だけ表示に直しました)。</li>
  <li>投稿管理画面やコメント管理画面で、投稿やコメントを編集して保存した際、元の画面ではなくログイン画面に戻ってしまうことがある不具合を修正しました。</li>
  <li>EZweb 端末で、投稿本文が Shift_JIS 換算で 1024 バイト以上のとき、携帯電話で編集すると末尾が切られてしまうため、編集画面で警告を出すようにしました。</li>
  <li>EZweb 端末で、WAP2.0 対応機と HDML 対応機を判別できるようにしました (テーマファイルは共通のままです)。</li>
  <li>SoftBank PDC 端末において、投稿タイトルが長い場合に編集時に末尾が切れてしまうことがある問題を修正しました。</li>
  <li>SoftBank 用エミュレーター (ウェブコンテンツヴューア) からの閲覧でも携帯電話表示になるようにしました。</li>
  <li>標準のパーマリンク構造 (/?p=1234 などの形式) を使っているサイトでパスワード保護した場合、端末によっては、正しいパスワードを送信してもパスワード解除できないことがある現象を修正しました。</li>
  <li>ウィルコム端末、その他端末 (スマートフォン等) での DOCTYPE 宣言を XHTML Basic ではなく、XHTML 1.0 Strict に変更しました。</li>
  <li><code>ks_comments_list_link()</code> テンプレートタグで、パスワード保護した投稿で保護解除状態のとき、絵文字とボタンの間が改行されないようにしました。</li>
  <li><code>ks_comments_link()</code> テンプレートタグに、引数 <code>$accesskey</code> を追加しました。</li>
  <li><code>ks_comment_post_link()</code> テンプレートタグに、引数 <code>$icon, $accesskey</code> を追加しました。</li>
  <li><code>ks_get_recent_comments()</code> テンプレートタグで、<code>$type</code> を pingback と指定しても、trackback+pingback を指定したときと同じ動作になっていたバグを修正しました。</li>
  <li>次の独自フィルターフックフィルターフックを追加しました: <code>allowedtags, leave_scheme, strip_links, image_to_link</code></li>
  <li>次のテンプレートタグを追加しました: <code>ks_inline_error_submit()</code></li>
</ul></dd>
<dt id="ver098">ver 0.98 (2007-12-27)</dt>
<dd><ul>
  <li>WordPres 2.3 以降で、投稿の本文表示でのキーワードタグの表示およびタグクラウドの表示に対応しました。</li>
  <li>携帯電話キャリアごとにテーマを変更できるようにしました。</li>
  <li>コメント投稿時に端末識別情報 (電話機製造番号、EZ番号等) を要求できるようにしました。</li>
  <li>各テーマに functions.php が存在するとき、読み込んで実行するようにしました。</li>
  <li>ドコモ FOMA で、i-mode XHTML で表示させるのをやめました (全キャリア text/html で表示)。ただし、<code>ks_use_appl_xhtml()</code> タグを使うと、application/xhtml による表示になります。</li>
  <li>画像にウェブサイトへのリンクを張っているとき、画像へのリンクの後ろに、ウェブサイトへのリンクを追加するようにしました (従来はリンクを削除していました)。</li>
  <li>ソフトバンク絵文字で、絵文字が続くときエスケープシーケンスを省略するようにしました (わずかながらパケット節約)。</li>
  <li>classic テーマでは、(いわゆる) 全角カタカナを半角に変換するようにしました。</li>
  <li>PNG 画像や GIF 画像に <code>class="ktai"</code> を付与してそのまま出力させたとき、i-mode では GIF 画像、Softbank PDC では PNG 画像を表示させるようにしました (あらかじめ同一ファイル名で PNG, GIF それぞれの画像を用意する必要があります)。</li>
  <li>画像に <code>class="ktai"</code> を付与してそのまま出力させたときでも、ページの全体サイズが携帯端末の表示容量を越える場合は、画像を alt テキストの内容に置換して容量制限に収まるようにしました。</li>
  <li>プラグインを有効にするとき WordPress Database Error が発生することがある問題を修正しました。</li>
  <li>Nokia, Opera Mini, PSP, Nintendo DS において、<code>ks_term_name()</code> テンプレートタグの出力を適切なものにしました (従来は N/A になっていた)。</li>
  <li><code>is_mobile()</code> 関数の提供をやめて、<code>is_ktai()</code> 関数に一本化しました。</li>
  <li>独自フィルターフック <code>raw_content, encoding_converted, split_page</code> を定義しました。</li>
  <li>次のテンプレートタグを追加しました: <code>ks_theme_url(), ks_use_appl_xhtml(), ks_is_required_term_id(), ks_require_term_id_form(), ks_tags(), ks_tag_cloud()</code></li>
</ul></dd>
<dt id="ver097">ver 0.97 (2007-12-15)</dt>
<dd><ul>
  <li>テーマ切り替え機能をつけました。複数のテーマを用意しておき、簡単に使い分けることができます。これにより、サンプルテンプレートの提供はやめました。</li>
  <li>外部サイトへのリンクは、一律にフルブラウザ閲覧リンクまたは中継ページ経由リンクに変換することとしました。</li>
  <li>検索結果ページで、検索語句を表示させるようにしました。</li>
  <li>設定パネルのデザインを少し変更しました。文字色はリアルタイムに色見本を確認できるようになりました。</li>
  <li>admin フォルダーをサーバーに設置しなかった場合、外部サイトへのリンクがある投稿・ページで PHP エラーが出てしまうバグを修正しました。 </li>
  <li>携帯電話でログインしたとき、セッション情報として保存する端末情報 (ユーザーエージェント、端末ID、契約者ID) をハッシュ化するようにしました (セキュリティー強化)。</li>
  <li>次のテンプレートタグを追加しました: <code>ks_is_loggedin(), ks_force_text_html(), ks_fix_encoding_form(), ks_detect_encoding(), ks_mb_get_form()</code></li>
</ul></dd>
<dt id="ver096">ver 0.96 (2007-12-04)</dt>
<dd><ul>
  <li>最新記事一覧やアーカイブ一覧で、タイトルの後ろにコメント数を表示するようにしました。また、アーカイブでの記事一覧を番号つきリストにしました。</li>
  <li>コメント投稿にログインできるようにしました。コメント投稿にログインを必須とするサイトでも携帯電話からコメントできます。</li>
  <li>i-mode, EZweb、ウィルコムでの絵文字をバイナリ埋め込み方式にしました。パケット量がわずかに削減されます。</li>
  <li>外部サイトへのリンクの扱いを改善しました (ドコモでフルブラウザ非対応機種は中継ページを表示させるようにした etc)。</li>
  <li>プラグインを無効にしたとき、セッション管理用のテーブルをデータベースから削除するようにしました。</li>
  <li>デフォルトのパーマリンク構造の場合、コメント投稿フォームが出なかったバグを修正しました。</li>
  <li>キーワードタグで日本語が使えなかった問題を修正しました。</li>
  <li>XHTML の文法違反があったのを修正しました。</li>
  <li>WordPress 確認ウィンドウの処理が不適切だったことがあるのを修正しました。</li>
  <li>附属テンプレートで、日本語を直接埋め込んだ箇所を大幅に減らしました。</li>
  <li>次のテンプレートタグを追加しました: <code>ks_get_logout_url(), ks_session_id_form(), ks_comments_post_url()</code></li>
  <li><code>ks_plugin_dir()</code> タグを <code>ks_plugin_url()</code> に改名しました。</li>
</ul></dd>
<dt id="ver095">ver 0.95 (2007-11-27)</dt>
<dd><ul>
  <li>Windows Mobile など「その他」端末では、PC 表示に切り替えられるようにしました。(ただし、クッキー未対応端末では切り替わりません)。</li>
  <li>ドコモ FOMA では、i-mode XHTML で表示させるようにしました。少し見栄えが違っているかもしれません。</li>
  <li>au の機種判別で新機種など追加しました。</li>
  <li>WordPress 2.3 以降では、キーワードタグの入力・編集をできるようにしました。</li>
  <li>XML 宣言が文法ミスだったのを修正しました。</li>
  <li>次のテンプレートタグを追加しました: <code>ks_mimetype(), ks_switch_pc_view()</code></li>
</ul></dd>
<dt id="ver094">ver 0.94 (2007-11-18)</dt>
<dd><ul>
  <li>各種スマートフォン、PSP, NDS のページ容量を 50KB に拡大しました。</li>
  <li>新規投稿時、投稿編集時にカテゴリーを変更できるようにしました。</li>
  <li>デフォルトカテゴリー、メール投稿時カテゴリーの設定をできるようにしました。</li>
  <li>ログイン直後、画面が真っ白または PHP のエラーが表示されることがある問題を修正しました。</li>
  <li>投稿編集のカテゴリー表示で、親カテゴリーを持つカテゴリー (第2階層以下のカテゴリー) が表示されない問題を修正しました。</li>
  <li>次のテンプレートタグを追加しました: <code>ks_get_wp_version()</code></li>
</ul></dd>
<dt id="ver093">ver 0.93 (2007-11-16)</dt>
<dd><ul>
  <li>サイト管理機能を実装しました。新規投稿・投稿編集・コメント管理が可能です。</li>
  <li>PSP, Nintendo DS も携帯電話向け表示をさせるようにしました。</li>
  <li>Windows CE, Windows Mobile はすべて携帯電話向け表示をさせるようにしました。</li>
  <li>コメント投稿・新規投稿・投稿編集など、携帯電話から送信された文字列を UTF-8 に変換させるとき、SJIS-win ではなく SJIS とみなして変換させるようにしました (波ダッシュが全角チルダになるのを防ぐため)。</li>
  <li><a href="http://wphoneplugin.org/">WPhone Admin Plugin</a> が存在する場合、<code>is_mobile()</code> 関数のかわりに <code>is_ktai()</code> 関数を定義するようにしました。</li>
  <li><code>ks_orderd_link()</code> タグを <code>ks_ordered_link()</code> とスペルミス修正しました。</li>
</ul></dd>
<dt id="ver092">ver 0.92 (2007-10-20)</dt>
<dd><ul>
  <li>サンプルテンプレートを添付しました。</li>
  <li>archive.php (年月アーカイブ等の表示) において、ポップアップ (ドロップダウン)</li>
  <li>メニュー式ページナビゲーションを導入しました。何十ページでも一挙に移動できます。</li>
  <li>alt 文字列が空の画像や 1 x 1 ピクセルの画像 (アフィリエイトやレイアウト調整用) はリンクせず無視するようにしました。</li>
  <li>del 要素はテキスト自体を削除するようにしました (多くの端末では取り消し線はサポートされず、del 要素かどうか区別が付かないため)。</li>
  <li>i モードの場合、外部サイトへのリンクを削除ではなく、フルブラウザでの閲覧リンクと設定できるようにしました。</li>
  <li>EM・ONE の Internet Explorer も携帯電話として認識するようにしました。</li>
  <li>次のテンプレートタグを追加しました: <code>ks_posts_nav_multi(), ks_posts_nav_dropdown()</code></li>
</ul></dd>
<dt id="ver091">ver 0.91 (2007-10-11)</dt>
<dd><ul>
  <li>各記事のコメントとトラックバック・ピンバックも分離できるようにしました。</li>
  <li>サムネール画像に元画像のリンクが設定されている場合、元画像へのリンクを付与するようにしました。</li>
  <li>ページ分割をより自然になるよう改善しました。</li>
  <li>ウィルコム端末で、できるだけウィルコム独自の絵文字を使うようにしました (対応する絵文字がない場合は従来通り i モード互換絵文字)。</li>
  <li>W-ZERO3 は絵文字非対応っぽいので、ウィルコムではなく「その他」端末として認識させるようにしました。また、ドコモ htcZ 、ソフトバンク X シリーズも携帯電話向け出力を行うようにしました。</li>
  <li>携帯電話の機種名を取得・表示できるようにしました (<code>ks_term_name()</code> タグ)。</li>
  <li>3G 端末では、電話会社ごとに DOCTYPE 宣言を変えるようにしました。</li>
  <li>XHTML 不要タグの除去を <code>wp_kses()</code> を使って厳密に行えるようにしました。</li>
  <li>次のテンプレートタグを追加しました: <code>ks_term_name(), ks_charset()</code></li>
  <li><code>ks_comments_list_link()</code> を <code>ks_get_comments_list_link()</code> に改名しました。</li>
</ul></dd>
<dt id="ver090">ver 0.90 (2007-10-03)</dt>
<dd><ul>
  <li>ページ容量が大きい場合、5KB〜30KB ごとにページ分割するようにしました。</li>
  <li>ソース内の日本語表記を言語リソースに分離しました。</li>
  <li>au、ウィルコムの場合に外部サイトへのリンクを残せるようにしました。</li>
  <li><a href="http://www.neato.co.nz/ultimate-tag-warrior/">Ultimate Tag Warrior</a> 等、プラグインのアイコンは、画像へのリンクとせず alt 文字列の表示としました。</li>
  <li>ブックマーク(ブログロール)一覧を表示できるようにしました。(テンプレートの改造が必要)</li>
  <li>ホスト名直下に WordPress をインストールしている環境で、アーカイブ一覧、カテゴリー一覧のリンクが不正だった不具合を修正しました。</li>
  <li>次のテンプレートタグを追加しました: <code>ks_list_bookmarks()</code></li>
</ul></dd>
<dt id="ver083">ver 0.83 (2007-09-30)</dt>
<dd><ul>
  <li>最新コメント一覧を表示できるようにしました。</li>
  <li>設定画面を用意しました。ただし、設定できる内容は <a href="http://hrlk.com/script/mobile-eye-plus/">Mobile Eye+</a> と異なります。</li>
  <li>日付表示で、今年と同じ年ならば年を省略、今日と同じ年月日ならば日付を省略するようにしました。</li>
  <li>他プラグインで携帯電話出力か確認できるよう <code>is_mobile()</code> 関数を定義しました。</li>
  <li>画像に <code>class="ktai"</code> が付与されている場合はそのまま表示させるようにしました。</li>
  <li>xx_home.php テンプレートを廃止しました。</li>
  <li>次のテンプレートタグを追加しました: <code>ks_option(), ks_time(), ks_comment_datetime(), ks_comments_list_link(), ks_recent_comments()</code></li>
</ul></dd>
<dt id="ver082">ver 0.82 (2007-09-28)</dt>
<dd><ul>
  <li>検索フォームに対応しました。</li>
  <li>WordPress 内蔵のスマイリーは携帯電話絵文字に変換して表示させるようにしました。</li>
  <li>&lt;!--nextpage--&gt; を使った投稿でも正しく表示されるようにしました。</li>
  <li>ページ内リンク (&lt;a href="#top"&gt; のような # を使ったリンク)、mailto:, tel: スキームを使ったリンクを削除せず残すようにしました。</li>
  <li>次のテンプレートタグを追加しました: <code>ks_link_pages(), ks_back_to_post()</code></li>
</ul></dd>
<dt id="ver081">ver 0.81 (2007-09-24)</dt>
<dd><ul>
  <li>フロントページを記事一覧だけのスタイルにできる xx_home.php を添付しました。</li>
  <li>コメント一覧／コメント投稿フォームのテンプレートを合体して comments.php にしました。WordPress 標準に近い型式となりました。</li>
  <li>パーマリンク構造がデフォルトの場合、コメント閲覧・投稿ができない不具合を修正しました。</li>
  <li>ホスト名直下に WordPress をインストールしている環境でコメント投稿できないことがある問題を修正しました。</li>
  <li>コメント一覧でも外部サイトへのリンクを除去するようにしました。</li>
  <li>次のテンプレートタグを追加しました: <code>ks_is_comments_list(), ks_is_comment_post(), ks_is_comments()</code></li>
  <li>次のテンプレートタグを廃止しました: <code>ks_comments_setup()</code></li>
</ul></dd>
<dt id="ver080">ver 0.80 (2007-09-23)</dt>
<dd><ul>
  <li>コメントの表示・投稿に対応しました。</li>
  <li>パスワード保護された投稿に対応しました。</li>
  <li><code>ks_content()</code> タグを復活させました。</li>
  <li>次のテンプレートタグを追加しました: <code>ks_siteurl(), ks_plugin_dir(), ks_check_password(), ks_comments_setup(), ks_comments_link(), ks_comments_post_link(), ks_back_to_post()</code></li>
</ul></dd>
<dt id="ver071">ver 0.71 (2007-09-22)</dt>
<dd><ul>
  <li>固定ページに対応しました。フッターにページ一覧メニューが出ます。</li>
  <li><code>ks_content(), ks_list_categories()</code> タグを廃止して、それぞれ <code>the_content(), wp_list_categories()</code> の出力を携帯電話向けに自動変換させるようにしました。</li>
  <li>見出し要素 (h1 - h6) は SoftBank 6-3 シリーズ未対応なので、p 要素に変換させるようにしました。</li>
  <li>Opera Mini, Nokia, EM・ONE など、携帯電話向け表示を行う端末を増やしました。</li>
  <li>php.ini で <code>short_open_tag = On</code> という設定のサーバーで構文エラーが出ないようにしました。</li>
  <li>index.php テンプレートにおいて、ドコモ端末で「↓9.最新の記事」リンクが効かなかったのを修正しました。</li>
  <li>index.php, single.php のテンプレートにおいて、投稿者を示す絵文字をユニセックスなものにしました。</li>
  <li>次のテンプレートタグを追加しました: <code>ks_title(), ks_pages_menu(), ks_is_front()</code></li>
</ul></dd>
<dt id="ver070">ver 0.70 (2007-09-19)</dt>
<dd><ul>
  <li>新規リリース。</li>
</ul></dd>
</dl>
</body>
</html>
